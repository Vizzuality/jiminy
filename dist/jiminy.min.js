!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("datalib")):"function"==typeof define&&define.amd?define(["datalib"],e):"object"==typeof exports?exports.Jiminy=e(require("datalib")):t.Jiminy=e(t.dl)}(this,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={exports:{},id:i,loaded:!1};return t[i].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(4),u=i(s),o=n(6),l=i(o),c=n(3),f=i(c),h=function(){function t(e){a(this,t),this._dataset=new u["default"](e),this._fields=new l["default"](this._dataset)}return r(t,[{key:"recommendation",value:function(t){var e=[],n=!1;if(null!==t&&void 0!==t){if(!Array.isArray(t))throw new Error("recommendation should be called without any parameter or with an array of column names.");t.length&&(n=!0,e=this._fields.get(t))}e.length||(e=this._fields.fields);var i={allInclusive:n};return this._availableCharts=(new f["default"]).getAvailable(e,i),this._availableCharts.map(function(t){return t.name})}},{key:"columns",value:function(t,e){if(!t)throw new Error("columns expects the name of the chart as first argument.");var n=(new f["default"]).getChart(t);if(!n)throw new Error(t+" isn't a valid chart name. Check the documentation to see existing types of charts.");if(null!==e&&void 0!==e&&"string"!=typeof e)throw new Error("The second parameter of columns must be a string.");if(!e)return n.computeUsefulFields(this._fields.fields).map(function(t){return t.name});if(!~this._dataset.getColumnNames().indexOf(e))throw new Error('Unable to find the column "'+e+'" inside the dataset');var i=this._fields.get([e])[0];return n.computeUsefulFields(this._fields.fields,i).map(function(t){return t.name})}},{key:"name",get:function(){return"Jiminy"}},{key:"version",get:function(){return"0.0.1"}}]),t}();e["default"]=h,t.exports=e["default"]},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={isNaN:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}(function(t){return Number.isNaN?Number.isNaN(t):"number"==typeof t&&isNaN(t)})}},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){if(n(this,t),!(e&&e.hasOwnProperty("name")&&e.hasOwnProperty("acceptedStatTypes")))throw new Error("Charts must be instanciated with a correct configuration ie. with a name and a list of accepted statistical types.");this._name=e.name,this._acceptedStatTypes=e.acceptedStatTypes}return i(t,[{key:"isAvailable",value:function(t,e){var n=!1;if(e=e||{},e.allInclusive)for(var i=0,a=this._acceptedStatTypes.length;a>i;i++){var r=this._acceptedStatTypes[i];if(r.length===t.length&&(n=1===r.length?this._existFields(t,r[0],1)&&!this._existFields(t,r[0],2):r[0]===r[1]?this._existFields(t,r[0],2)&&!this._existFields(t,r[0],3):this._existFields(t,r[0],1)&&!this._existFields(t,r[0],2)&&this._existFields(t,r[1],1)&&!this._existFields(t,r[1],2)),n)break}else for(var i=0,a=this._acceptedStatTypes.length;a>i;i++){var r=this._acceptedStatTypes[i];if(n=1===r.length?this._existFields(t,r[0],1):r[0]===r[1]?this._existFields(t,r[0],2):this._existFields(t,r[0],1)&&this._existFields(t,r[1],1))break}return n}},{key:"_capitalize",value:function(t){return t?t[0].toUpperCase()+t.slice(1,t.length):t}},{key:"_existFields",value:function(t,e,n){return t.filter(function(t){return t.statType["is"+this._capitalize(e)]}.bind(this)).length>=n}},{key:"computeUsefulFields",value:function(t,e){var n=this;return t.filter(function(i){for(var a=!1,r=0,s=n._acceptedStatTypes.length;s>r;r++){var u=n._acceptedStatTypes[r];if(a=1===u.length?!e&&u[0]===i.statType.name:u[0]===u[1]?u[0]===i.statType.name&&n._existFields(t,u[0],2)&&(!e||e&&e.name!==i.name):e?u[0]===i.statType.name&&n._existFields(t,u[1],1)&&e.statType.name===u[1]||u[1]===i.statType.name&&n._existFields(t,u[0],1)&&e.statType.name===u[0]:u[0]===i.statType.name&&n._existFields(t,u[1],1))break}return a})}},{key:"equals",value:function(t){return t.constructor&&t.constructor===this.constructor&&t.name===this._name&&t.acceptedStatTypes===this._acceptedStatTypes}},{key:"name",get:function(){return this._name}},{key:"acceptedStatTypes",get:function(){return this._acceptedStatTypes}}]),t}();e["default"]=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=i(s),o=[{name:"bar",acceptedStatTypes:[["nominal"],["ordinal"],["quantitative","nominal"],["quantitative","temporal"],["quantitative","ordinal"]]},{name:"line",acceptedStatTypes:[["quantitative","temporal"],["quantitative","ordinal"]]},{name:"pie",acceptedStatTypes:[["nominal"],["ordinal"]]},{name:"scatter",acceptedStatTypes:[["quantitative","quantitative"],["nominal","nominal"],["nominal","ordinal"],["ordinal","ordinal"]]},{name:"1d_scatter",acceptedStatTypes:[["quantitative"],["temporal"]]},{name:"1d_tick",acceptedStatTypes:[["quantitative"],["temporal"]]}],l=function(){function t(){a(this,t),this._config=o,this._charts=this._createCharts()}return r(t,[{key:"_createCharts",value:function(){for(var t=[],e=0,n=this._config.length;n>e;e++)t.push(new u["default"](this._config[e]));return t}},{key:"getAvailable",value:function(t,e){var n=[];if(e=e||{},!t||!t.length)throw new Error("At least one field is required to compute the available charts.");for(var i=0,a=this._charts.length;a>i;i++){var r={};r.allInclusive&&(r.allInclusive=!0),this._charts[i].isAvailable(t,r)&&n.push(this._charts[i])}return n}},{key:"getChart",value:function(t){for(var e=0,n=this._charts.length;n>e;e++)if(this._charts[e].name===t)return this._charts[e];return null}},{key:"charts",get:function(){return this._charts}}]),t}();e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=n(1),o=i(u),l=function(){function t(e){if(a(this,t),this._data=e,!this.valid)throw new Error("The dataset must be a non-empty array.")}return s(t,[{key:"getFirstValidValue",value:function(t){for(var e=0,n=this._data.length;n>e;e++){var i=this._data[e][t];if(this._validValue(i))return i}return null}},{key:"atLeast5DistinctValues",value:function(t){for(var e=[],n=0,i=this._data.length;i>n;n++){var a=this._data[n][t];if(this._validValue(a)&&!~e.indexOf(a)&&e.push(a),e.length>=5)return!0}return!1}},{key:"getColumnNames",value:function(){var t=this._data[0],e=[];for(var n in t)e.push(n);return e}},{key:"_validValue",value:function(t){return!(null===t||void 0===t||o["default"].isNaN(t)||Array.isArray(t)||"object"===("undefined"==typeof t?"undefined":r(t)))}},{key:"data",get:function(){return this._data}},{key:"valid",get:function(){return this._data&&Array.isArray(this._data)&&this._data.length>0}}]),t}();e["default"]=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(8),u=i(s),o=n(7),l=i(o),c=function(){function t(e,n){if(a(this,t),!e||!n||!n.valid)throw new Error("Fields must be instanciated with a name and with the dataset");this._name=e,this._type=new u["default"](e,n),this._stats=this._computeStats(n),this._statType=new l["default"](this._type,this._stats)}return r(t,[{key:"_computeStats",value:function(t){return{atLeast5DistinctValues:t.atLeast5DistinctValues(this._name)}}},{key:"equals",value:function(t){return t.constructor&&t.constructor===this.constructor&&t.name===this._name&&t.type.equals(this._type)&&t.statType.equals(this._statType)}},{key:"name",get:function(){return this._name}},{key:"type",get:function(){return this._type}},{key:"statType",get:function(){return this._statType}}]),t}();e["default"]=c},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),u=i(s),o=function(){function t(e){if(a(this,t),!e||!e.valid)throw new Error("Fields expects a valid dataset");this._fields=this.computeFields(e)}return r(t,[{key:"computeFields",value:function(t){for(var e=t.getColumnNames(),n=[],i=0,a=e.length;a>i;i++)n.push(new u["default"](e[i],t));return n}},{key:"get",value:function(t){for(var e=[],n=0,i=t.length;i>n;n++){var a=t[n],r=this._getField(a);r?e.push(r):console.warn('Unable to find the column "'+a+'" inside the dataset.')}return e}},{key:"_getField",value:function(t){for(var e=0,n=this._fields.length;n>e;e++)if(this.fields[e].name===t)return this._fields[e];return null}},{key:"fields",get:function(){return this._fields}}]),t}();e["default"]=o},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=["quantitative","nominal","ordinal","temporal"],r=function(){function t(e,i){if(n(this,t),this._types=a,!(e&&i&&i.hasOwnProperty("atLeast5DistinctValues")))throw new Error("Statistical types must be instanciated with the field's type and the stats.");this._name=this._inferType(e,i)}return i(t,[{key:"_inferType",value:function(t,e){var n=this._types[2];return t.isBoolean||t.isString?n=this._types[1]:t.isDate?n=this._types[3]:(t.isNumber||t.isInteger)&&e.atLeast5DistinctValues&&(n=this._types[0]),n}},{key:"equals",value:function(t){return t.constructor&&t.constructor===this.constructor&&t.name===this._name}},{key:"types",get:function(){return this._types}},{key:"name",get:function(){return this._name}},{key:"isQuantitative",get:function(){return this._name===this._types[0]}},{key:"isNominal",get:function(){return this._name===this._types[1]}},{key:"isOrdinal",get:function(){return this._name===this._types[2]}},{key:"isTemporal",get:function(){return this._name===this._types[3]}}]),t}();e["default"]=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(9),u=i(s),o=n(1),l=i(o),c=["number","integer","string","date","boolean"],f=function(){function t(e,n){if(a(this,t),this._types=c,!u["default"])throw new Error("Make sure to include the dependency 'datalib'");if(!(e&&n&&n.valid))throw new Error("A type requires the dataset and the field name.");this._name=this._inferType(e,n)}return r(t,[{key:"_inferType",value:function(t,e){var n=e.getFirstValidValue(t);return null!==n?u["default"].type.infer([n]):this._types[2]}},{key:"_validValue",value:function(t){return null!==t&&void 0!==t&&!l["default"].isNaN(t)}},{key:"equals",value:function(t){return t.constructor&&t.constructor===this.constructor&&t.name===this._name}},{key:"name",get:function(){return this._name}},{key:"isNumber",get:function(){return 0===this._types.indexOf(this._name)}},{key:"isInteger",get:function(){return 1===this._types.indexOf(this._name)}},{key:"isString",get:function(){return 2===this._types.indexOf(this._name)}},{key:"isDate",get:function(){return 3===this._types.indexOf(this._name)}},{key:"isBoolean",get:function(){return 4===this._types.indexOf(this._name)}}]),t}();e["default"]=f},function(e,n){e.exports=t}])});